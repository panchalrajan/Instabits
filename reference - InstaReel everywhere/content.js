(()=>{if(!window.isInstaReelExtensionLoaded){window.isInstaReelExtensionLoaded=!0;const s=[],o=[];let c=!1,l="false"!==localStorage.getItem("isInstaReelEnabled"),u=!1,p=null,v=-1,m=!1;function t(){try{if(!p||p.src.includes("http"))return;i(),p.addEventListener("ended",(function(){i()}))}catch(t){}}async function e(t=0){if(s[t])try{p.src=s[t]?.urls?.[0]?.url,p.load(),l&&await p.play(),s.length-3<t&&function(){let t=document.querySelectorAll("video:not(#instareel-ere-player)");t[t.length-1].scrollIntoView(),window.postMessage({type:"REPEAT_XHR_CALL"},"*")}(),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("previoustrack",a),navigator.mediaSession.setActionHandler("nexttrack",i))}catch(t){}else v--}function n(){const t=()=>{document.querySelectorAll("video:not(#instareel-ere-player)").forEach((t=>{t.pause(),t.muted=!0}))};t(),setTimeout(t,200)}async function i(){v++,await e(v)}async function a(){v--,await e(v)}function r(){window.location.href.includes(".instagram.com/reels")?document.body?.classList?.add("instagram-reel-page"):(document.body?.classList?.remove("instagram-reel-page"),c||p.pause())}function d(){document.body.insertAdjacentHTML("beforeend",`<div id="instareel-ere">\n\t\t\t\t\t<div class="instareel-ere-controls">\n\t\t\t\t\t\t<label class="switch">\n\t\t\t\t\t\t\t<input type="checkbox" ${l?"checked":""} id="instareel-ere-toggle">\n\t\t\t\t\t\t\t<span class="slider round"></span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<button id="instareel-ere-launch" disabled>Launch Everywhere</button>\n\t\t\t\t\t\t<button id="openCurrentReel" disabled>Open this reel</button>\n\t\t\t\t\t\t<div class="donate-ere-wrapper">\n\t\t\t\t\t\t\t<span>Support this extension</span>\n\t\t\t\t\t\t\t<button id="donate-btn">Donate</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="developer-wrapper">\n\t\t\t\t\t\t\t<a href="https://abhishekkushwaha.com/" target="_blank">Developed with &#10084; by Abhishek</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="instareel-ere-player-wrapper">\n\t\t\t\t\t\t<div class="player-container">\n\t\t\t\t\t\t\t<button id="instareel-ere-prev">\t\t\t\t\n\t\t\t\t\t\t\t\t<?xml version="1.0" encoding="iso-8859-1"?>\n\t\t\t\t\t\t\t\t<svg fill="#000000" height="800px" width="800px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n\t\t\t\t\t\t\t\t\tviewBox="0 0 55.753 55.753" xml:space="preserve">\n\t\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t\t<path d="M12.745,23.915c0.283-0.282,0.59-0.52,0.913-0.727L35.266,1.581c2.108-2.107,5.528-2.108,7.637,0.001\n\t\t\t\t\t\t\t\t\t\tc2.109,2.108,2.109,5.527,0,7.637L24.294,27.828l18.705,18.706c2.109,2.108,2.109,5.526,0,7.637\n\t\t\t\t\t\t\t\t\t\tc-1.055,1.056-2.438,1.582-3.818,1.582s-2.764-0.526-3.818-1.582L13.658,32.464c-0.323-0.207-0.632-0.445-0.913-0.727\n\t\t\t\t\t\t\t\t\t\tc-1.078-1.078-1.598-2.498-1.572-3.911C11.147,26.413,11.667,24.994,12.745,23.915z"/>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<video playsinline source="" controls id="instareel-ere-player"></video>\n\t\t\t\t\t\t\t<button id="instareel-ere-next">\n\t\t\t\t\t\t\t\t\t<?xml version="1.0" encoding="iso-8859-1"?>\n\t\t\t\t\t\t\t\t\t<svg fill="#000000" height="800px" width="800px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n\t\t\t\t\t\t\t\t\t\tviewBox="0 0 55.752 55.752" xml:space="preserve">\n\t\t\t\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t\t\t\t<path d="M43.006,23.916c-0.28-0.282-0.59-0.52-0.912-0.727L20.485,1.581c-2.109-2.107-5.527-2.108-7.637,0.001\n\t\t\t\t\t\t\t\t\t\t\tc-2.109,2.108-2.109,5.527,0,7.637l18.611,18.609L12.754,46.535c-2.11,2.107-2.11,5.527,0,7.637c1.055,1.053,2.436,1.58,3.817,1.58\n\t\t\t\t\t\t\t\t\t\t\ts2.765-0.527,3.817-1.582l21.706-21.703c0.322-0.207,0.631-0.444,0.912-0.727c1.08-1.08,1.598-2.498,1.574-3.912\n\t\t\t\t\t\t\t\t\t\t\tC44.605,26.413,44.086,24.993,43.006,23.916z"/>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`),p=document.getElementById("instareel-ere-player"),m&&document.body.classList.add("instareel-ere-temp-disabled"),s.length&&t(),p.addEventListener("loadedmetadata",(()=>{document.querySelector("#instareel-ere-launch").removeAttribute("disabled"),document.querySelector("#openCurrentReel").removeAttribute("disabled")})),document.querySelector("#instareel-ere-launch").addEventListener("click",(function(){c?document.exitPictureInPicture():p.requestPictureInPicture()})),document.querySelector("#openCurrentReel").addEventListener("click",(function(){window.open(`https://www.instagram.com/reels/${s[v]?.id}?utm_ads=TXT`)})),document.querySelector("#donate-btn").addEventListener("click",(function(){window.open("https://buymeacoffee.com/2ptik7b7la","_blank")})),document.addEventListener("visibilitychange",(t=>{l&&n()})),p.addEventListener("playing",(()=>{n()})),p.addEventListener("enterpictureinpicture",(()=>{c=!0,document.querySelector("#instareel-ere-launch").innerHTML="Stop Everywhere"})),p.addEventListener("leavepictureinpicture",(()=>{c=!1,document.querySelector("#instareel-ere-launch").innerHTML="Launch Everywhere"})),document.querySelector("#instareel-ere-toggle").addEventListener("change",(function(){l=this.checked,l?document.body.classList.add("instareel-ere-enabled"):document.body.classList.remove("instareel-ere-enabled"),localStorage.setItem("isInstaReelEnabled",l);try{c&&(c=!1,document.exitPictureInPicture()),p.pause()}catch(t){}})),document.querySelector("#instareel-ere-prev").addEventListener("click",a),document.querySelector("#instareel-ere-next").addEventListener("click",i),r()}u||(u=!0,window.addEventListener("message",(e=>{"XHR_INTERCEPTED"===e.data.type&&e?.data.data?.url.includes("graphql/query")&&function(e){try{let n=JSON.parse(e.response);n=n.data.xdt_api__v1__clips__home__connection_v2,n?.edges.forEach((t=>{t.node.media.video_versions&&-1===o.indexOf(t.node.media.code)&&(o.push(t.node.media.code),s.push({id:t.node.media.code,urls:t.node.media.video_versions}))})),s.length&&t()}catch(t){}}(e.data.data),e.data.type})),chrome.runtime.sendMessage({action:"injectXhrOverride"})),window?.navigation.addEventListener("navigatesuccess",r);const h=new URL(location.href).searchParams.get("utm_ads");h&&"TXT"===h&&(m=!0,l=!1),document.body?(l&&document.body.classList.add("instareel-ere-enabled"),d()):document.addEventListener("DOMContentLoaded",(()=>{l&&document.body.classList.add("instareel-ere-enabled"),d()}))}})();